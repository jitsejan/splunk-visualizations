<dashboard hideFooter="true">
  <label>Art Story Artists</label>
  <row>
    <panel>
      <chart>
        <search>
          <query>index=jitsejan source="*theartstory_artists.csv"
| top limit=20 bornplace</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <drilldown>
          <set token="form.bornplace">$row.bornplace$</set>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$form.bornplace$">
      <table>
        <search>
          <query>index=jitsejan source="*theartstory_artists.csv" bornplace="$form.bornplace$"
| table name 
| sort name
| rename name as Artist</query>
          <earliest>0</earliest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">20</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="percentagesRow">false</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
        <drilldown>
          <set token="form.artist">$row.Artist$</set>
        </drilldown>
      </table>
    </panel>
  </row>
  <row>
    <panel depends="$form.artist$">
      <table>
        <search>
          <query>index=jitsejan source="*theartstory_artists.csv" name="$form.artist$" 
| table borndate, bornplace, dieddate, diedplace, startyear, endyear, influence_by_movements, image
| rename borndate as "Born on", bornplace as "Born in", dieddate as "Died on", diedplace as "Died in", startyear as "Started in", endyear as "Ended in", influence_by_movements as "Art movement", image as Picture</query>
          <earliest>1481714197.000</earliest>
          <sampleRatio>1</sampleRatio>
          <finalized>
            <set token="Picture">$result.Picture$</set>
          </finalized>
        </search>
        <option name="count">20</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="percentagesRow">false</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
      </table>
    </panel>
  </row>
  <row>
    <panel depends="$form.artist$">
      <html>
        <img src="$Picture$"/>
       </html>
    </panel>
  </row>
  <row>
    <panel>
      <map>
        <search>
          <query>index=jitsejan source="*theartstory_artists.csv"
| eval leftbracket=replace(movement,"\[","")
| eval movement=replace(leftbracket,"\]","")
| makemv delim="," movement 
| rex field=bornplace "(?P&lt;city&gt;.*),\s(?P&lt;country&gt;.*)" 
| lookup geo_attr_us_states.csv state_name AS country 
| eval state=if(isnotnull(state_code), country, NULL), country=if(isnotnull(state_code), "United States", country)
| lookup geo_attr_countries.csv country AS country
| stats count by country
| rename country as Country | geom geo_countries featureIdField=Country</query>
          <earliest>0</earliest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="drilldown">all</option>
        <option name="mapping.choroplethLayer.colorBins">9</option>
        <option name="mapping.choroplethLayer.colorMode">categorical</option>
        <option name="mapping.choroplethLayer.maximumColor">0xDB5800</option>
        <option name="mapping.choroplethLayer.minimumColor">0x2F25BA</option>
        <option name="mapping.choroplethLayer.neutralPoint">0</option>
        <option name="mapping.choroplethLayer.shapeOpacity">0.75</option>
        <option name="mapping.choroplethLayer.showBorder">1</option>
        <option name="mapping.data.maxClusters">100</option>
        <option name="mapping.map.center">(0,0)</option>
        <option name="mapping.map.panning">1</option>
        <option name="mapping.map.scrollZoom">0</option>
        <option name="mapping.map.zoom">2</option>
        <option name="mapping.markerLayer.markerMaxSize">50</option>
        <option name="mapping.markerLayer.markerMinSize">10</option>
        <option name="mapping.markerLayer.markerOpacity">0.8</option>
        <option name="mapping.showTiles">1</option>
        <option name="mapping.tileLayer.maxZoom">19</option>
        <option name="mapping.tileLayer.minZoom">0</option>
        <option name="mapping.tileLayer.tileOpacity">1</option>
        <option name="mapping.tileLayer.url">http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png</option>
        <option name="mapping.type">choropleth</option>
      </map>
    </panel>
  </row>
</dashboard>